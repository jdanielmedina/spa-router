<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>params</title>
  <link rel="stylesheet" href="css/demo.css">
</head>
<body>
  <div id="main-container">
    <div class="field">
      <input type="text" placeholder="parameter string">
      <button id="add2">add to router</button>
    </div>
    <div class="field">
      <input type="text" placeholder="url">
      <button id="dispatch2">Dispatch</button>
    </div>
    <div class="field" id="show">

    </div>
  </div>
  <script src="../build/global/spa-router.js"></script>
  <script>
  var aRouter = new Router();
  aRouter.init();
  var show = document.getElementById('show');
  document.getElementById('add2').addEventListener('click', function(evt) {
    var input = this.parentNode.children[0];
    var path = input.value.replace(/^\s*|\s*$/g, '');
    aRouter.on(path, function(req) {
      var html = '';
      for (var p in req.params) {
        if (req.params.hasOwnProperty(p)) {
          html += '<p>' + p + ':' + req.params[p] + '</p>';
        }
      }
      show.innerHTML = html;
    });
    console.log(aRouter.routeTree);
  });
  document.getElementById('dispatch2').addEventListener('click', function(evt) {
    var input = this.parentNode.children[0];
    var url = input.value.replace(/^\s*|\s*$/g, '');
    aRouter.dispatch(url);
  });

  var zRouter = new Router({
    '/': function(req) {
      console.log(req.params);
    },
    '/admin': {
      '/:id([1-4]+)': function(req) {
        console.log(req.params);
      },
      '/([5-6]+)': function(req) {
        console.log(req.params);
      },
      '/edit': {
        '/': function(req) {
          console.log(req.params);
        },
        '/:id([0-9]+)': function(req) {
          console.log(req.params);
        }
      },
      '/list/:color([a-z]+)-:size([0-9]{4})-:price([0-9]+)': function(req) { // ([a-z]+-[0-9]+-[0-9]+)
        console.log(req.params); // {color: 'red', size: '12', price: '23'}
      },
      '/post/:id(integer)/:time(date)': function(req) { // ([0-9]+), ()
        console.log(req.params); // {id: '12', time: '2015-05-20'}
      }
    }
  });
  zRouter.configure({
    notFound: function(req) { console.log('not found'); }
  });
  zRouter.init();
  console.log(zRouter.routeTree);
  </script>
</body>
</html>
