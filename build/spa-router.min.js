/* spa-router by zcoding 2015-05-12 version: 1.1.1 */
!function(a){"function"==typeof define&&define.cmd?define(function(require,exports,module){a(exports)}):a(window)}(function(exports){function a(a){for(var b=k.listeners,c=0,d=b.length;d>c;c++)b[c](a)}function b(a,b){for(var c,d=b.split("/"),e=null,f=!1,g=a,i=0,j=d.length;j>i;++i){c={};var k=d[i],l=new RegExp(":([a-zA-Z_][a-zA-Z0-9_]*)","g");k=k.replace(l,"([a-zA-Z0-9]+)");var m=d[i].match(l);if(null!==m)for(var n=0;n<m.length;++n)c[n]=m[n].slice(1);else c=!1;for(var o=0;o<g._children.length;++o)if(g._children[o].value===k){e=g._children[o],f=!0;break}if(!f){var p=new h(k);g.children(p),p.parent(g),p.params=c,e=p}g=e,f=!1}return e}function c(a,d){if(g(d))return a.callbacks=[d],a;if(f(d))return a.callbacks=d,a;for(var e in d)if(d.hasOwnProperty(e)){var h=d[e];if("/"===e)c(a,h);else{""!==e&&"/"===e[0]&&(e=e.slice(1));var i=b(a,e);c(i,h)}}return a}function d(a,b,c){var d={},e=null,f=a,g=b.split("/");if(g[0]!==a.value)return[e,d];for(var h=a,i=!1,j=1,k=g.length;k>j;++j){i=!1;for(var l=0;l<f._children.length;++l){var m=f._children[l],n=new RegExp("^"+m.value+"$"),o=g[j].match(n);if(null!==o){if(m.params){o=[].slice.apply(o,[1]);for(var p=0;p<o.length;++p)d[m.params[p]]=o[p]}h=m,f=h,i=!0;break}}if(!i)break}return i&&(e=h.callbacks),[e,d]}var e=Object.prototype.toString,f=function(a){return"[object Array]"===e.call(a)},g=function(a){return"[object Function]"===e.call(a)},h=function(a){if("undefined"==typeof a)throw new TypeError("The RNode Constructor Need A Value.");this.value=a,this.params={},this.callbacks=null,this.before=null,this.after=null,this._children=[],this._parent=null},i=h.prototype;i.children=function(a){return"undefined"==typeof a?this._children:(a instanceof h?this._children.push(a):utils.isArray(a)&&(this._children=this.children.concat(a)),this)},i.parent=function(a){return"undefined"==typeof a?this._parent:(a instanceof h&&(this._parent=a),this)};var j=document.location,k={listeners:null,add:function(a){return this.listeners||(this.listeners=[]),this.listeners.push(a),this},destroy:function(a){var b=this.listeners;if(l&&b){for(var c=b-1;c>=0;--c)b[c]===a&&b.splice(c,1);return this}},setHash:function(a){return j.hash="/"===a[0]?a:"/"+a,this}};window.onhashchange=a;var l=exports.Router=function(a){if(a=a||{},!(this instanceof l))return new l(a);var b=new h("");this.routeTree=c(b,a),this.options={},this.configure()},m=l.prototype;m.init=function(a){var b=this;this.handler=function(a){var c=a&&a.newURL||window.location.hash,d=c.replace(/.*#/,"");b.dispatch("/"===d.charAt(0)?d:"/"+d)},k.add(this.handler),this.handler()},m.mount=function(a,d){return""!==a&&"/"===a[0]&&(a=a.slice(1)),c(b(this.routeTree,a),d),this},m.on=m.route=function(a,c){""!==a&&"/"===a[0]&&(a=a.slice(1));var d=b(this.routeTree,a);return d.callbacks=d.callbacks||[],f(c)?d.callbacks=d.callbacks.concat(c):g(c)&&d.callbacks.push(c),this},m.once=function(a,b){},m.add=function(){},m.off=function(a){},m.configure=function(a){a=a||{},this.notFound=a.notFound},m.map=function(){},m.redirect=function(a){return k.setHash(a),this},m.before=function(){},m.after=function(){};var n=function(a){for(var b=a.split("&"),c={},d=/^([0-9a-zA-Z_]+)\[([0-9a-zA-Z_]+)\]$/,e=0,g=b.length;g>e;++e){var h=b[e].split("=");if(!(h.length<2)){var i=h[0],j=h.slice(1).join(""),k=i.match(d);if(null!==k){i=k[1];var l=k[2],m=c[i];if("undefined"==typeof m)m=/^[0-9]+$/.test(l)?[]:{};else if(f(m)&&!/^[0-9]+$/.test(l)){for(var n={},o=0,p=m.length;p>o;++o)"undefined"!=typeof m[o]&&(n[o]=m[o]);m=n}m[l]=j,c[i]=m}else c[i]=j}}return c};m.dispatch=function(a){var b=this.routeTree,c=a,e=a.indexOf("?"),g=-1===e?"":a.slice(e+1);a=-1===e?a:a.slice(0,e);var h={uri:c,path:a,query:n(g)};"/"===a&&(a="");var i=d(b,a),j=i[0];if(h.params=i[1],null!==j){if(!f(j))throw new TypeError("callbacks must be an array type");for(var k=0,l=j.length;l>k;++k)j[k].call(this,h)}else this.notFound&&this.notFound(h)}});
//# sourceMappingURL=spa-router.min.map