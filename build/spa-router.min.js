/* spa-router by zcoding 2015-05-12 version: 1.0.0-0 */
!function(a){"function"==typeof define&&define.cmd?define(function(require,exports,module){a(exports)}):a(window)}(function(exports){function a(a){for(var b=h.listeners,c=0,d=b.length;d>c;c++)b[c](a)}function b(a,b){for(var c,d=b.split("/"),e=null,g=!1,h=a,i=0,j=d.length;j>i;++i){c={};var k=d[i],l=new RegExp(":([a-zA-Z_][a-zA-Z0-9_]*)","g");k=k.replace(l,"([a-zA-Z0-9]+)");var m=d[i].match(l);if(null!==m)for(var n=0;n<m.length;++n)c[n]=m[n].slice(1);else c=!1;for(var o=0;o<h._children.length;++o)if(h._children[o].value===k){e=h._children[o],g=!0;break}if(!g){var p=new f(k);h.children(p),p.parent(h),p.params=c,e=p}h=e,g=!1}return e}function c(a,d){if(e.isFunction(d)||e.isArray(d))return a.callbacks=d,a;for(var f in d)if(d.hasOwnProperty(f)){var g=d[f];if("/"===f)c(a,g);else{""!==f&&"/"===f[0]&&(f=f.slice(1));var h=b(a,f);c(h,g)}}return a}function d(a,b,c){var d={},e=null,f=a,g=b.split("/");if(g[0]!==a.value)return[e,d];for(var h=a,i=!0,j=1,k=g.length;k>j;++j){for(var l=0;l<f._children.length;++l){var m=f._children[l],n=new RegExp("^"+m.value+"$");i=!1;var o=g[j].match(n);if(null!==o){if(m.params){o=[].slice.apply(o,[1]);for(var p=0;p<o.length;++p)d[m.params[p]]=o[p]}h=m,f=h,i=!0;break}}if(!i)break}return i&&(e=h.callbacks),[e,d]}var e={hasOwn:function(a){return this.hasOwnProperty(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isPlainObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)}},f=function(a){if("undefined"==typeof a)throw new TypeError("The RNode Constructor Need A Value.");this.value=a,this.params={},this.callbacks=null,this.before=null,this.after=null,this._children=[],this._parent=null};f.prototype.children=function(a){return"undefined"==typeof a?this._children:(a instanceof f?this._children.push(a):e.isArray(a)&&(this._children=this.children.concat(a)),this)},f.prototype.parent=function(a){return"undefined"==typeof a?this._parent:(a instanceof f&&(this._parent=a),this)};var g=document.location,h={listeners:null,add:function(a){return this.listeners||(this.listeners=[]),this.listeners.push(a),this},destroy:function(a){var b=this.listeners;if(i&&b){for(var c=b-1;c>=0;--c)b[c]===a&&b.splice(c,1);return this}},setHash:function(a){return g.hash="/"===a[0]?a:"/"+a,this}};window.onhashchange=a;var i=exports.Router=function(a){if(a=a||{},!(this instanceof i))return new i(a);var b=new f("");this.routeTree=c(b,a),this.options={},this.configure()};i.prototype.init=function(){var a=this;this.handler=function(b){var c=b&&b.newURL||window.location.hash,d=c.replace(/.*#/,"");k.call(a,"/"===d.charAt(0)?d:"/"+d)},h.add(this.handler),this.handler()},i.prototype.mount=function(a,b){},i.prototype.on=i.prototype.route=function(a,b){},i.prototype.add=function(){},i.prototype.off=function(a){},i.prototype.configure=function(a){a=a||{},this.notFound=a.notFound},i.prototype.map=function(){},i.prototype.redirect=function(a){return h.setHash(a),this},i.prototype.dispatch=k,i.prototype.before=function(){},i.prototype.after=function(){};var j=function(a){for(var b=a.split("&"),c={},d=/^([0-9a-zA-Z_]+)\[([0-9a-zA-Z_]+)\]$/,e=0,f=b.length;f>e;++e){var g=b[e].split("=");if(!(g.length<2)){var h=g[0],i=g.slice(1).join(""),j=h.match(d);if(null!==j){h=j[1];var k=j[2],l=c[h];if("undefined"==typeof l)l=/^[0-9]+$/.test(k)?[]:{};else if(isArray(l)&&!/^[0-9]+$/.test(k)){for(var m={},n=0,o=l.length;o>n;++n)"undefined"!=typeof l[n]&&(m[n]=l[n]);l=m}l[k]=i,c[h]=l}else c[h]=i}}return c},k=function(a){var b=this.routeTree,c=a,f=a.indexOf("?"),g=-1===f?"":a.slice(f+1);a=-1===f?a:a.slice(0,f);var h={uri:c,path:a,query:j(g)};"/"===a&&(a="");var i=d(b,a),k=i[0];if(h.params=i[1],null!==k)if(e.isArray(k))for(var l=0,m=k.length;m>l;++l)k[l].call(this,h);else k.call(this,h);else this.notFound&&this.notFound(h)}});
//# sourceMappingURL=spa-router.min.map