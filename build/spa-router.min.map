{"version":3,"file":"spa-router.min.js","sources":["spa-router.js"],"names":["factory","define","cmd","require","exports","module","window","onchange","onChangeEvent","listeners","Listener","i","l","length","findNode","tree","path","params","parts","split","target","found","parent","len","realCurrentValue","matcher","k","replace","$1","$2","$3","j","_children","value","extendNode","RNode","children","createRouteTree","root","routes","isFunction","callbacks","isArray","hasOwnProperty","fns","slice","dfs","ci","ri","newParams","p","RegExp","matches","match","apply","searchRouteTree","toString","Object","prototype","decodeC","decodeURIComponent","encodeC","encodeURIComponent","hasOwn","obj","call","extend","srcList","arguments","src","q","addEvent","name","handler","addEventListener","attachEvent","queryHelper","parse","queryString","queryParts","query","key","val","undefined","push","stringify","keys","sort","len1","_parts","len2","join","TypeError","this","before","after","_parent","nprtt","concat","historySupport","history","init","mode","add","fn","setHashHistory","pushState","document","title","location","hash","currentHash","idf","indexOf","test","defaults","notFound","always","on","recurse","Router","routeTree","options","configure","rprtt","self","url","newURL","pathname","search","substr","dispatch","charAt","mount","route","handlers","n","uri","queryIndex","hashIndex","req","result","setRoute","loc","redirect","once","off","reload"],"mappings":";CAKC,SAASA,GACc,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,SAASE,QAASC,QAASC,QAChCL,EAAQI,WAGVJ,EAAQM,SAEV,SAASF,SA8PX,QAASG,GAASC,GAEhB,IAAK,GADDC,GAAYC,EAASD,UAChBE,EAAI,EAAGC,EAAIH,EAAUI,OAAYD,EAAJD,EAAOA,IAC3CF,EAAUE,GAAGH,GA6HjB,QAASM,GAASC,EAAMC,GAKtB,IAAK,GADDC,GAHAC,EAAQF,EAAKG,MAAM,KACnBC,EAAS,KAAMC,GAAQ,EACvBC,EAASP,EAEJJ,EAAI,EAAGY,EAAML,EAAML,OAAYU,EAAJZ,IAAWA,EAAG,CAChDM,GAAS,CACT,IAAIO,GAAmBN,EAAMP,GAEzBc,EAAU,0CAEVC,EAAI,CAGRF,GAAmBA,EAAiBG,QAAQF,EAAS,SAASG,EAAIC,EAAIC,GAGpE,MAFAb,GAASA,MACTA,EAAOS,KAAOG,EACI,mBAAPC,GACF,kBAEAA,GAKX,KAAK,GAAIC,GAAI,EAAGA,EAAIT,EAAOU,UAAUnB,SAAUkB,EAC7C,GAAIT,EAAOU,UAAUD,GAAGE,QAAUT,EAAkB,CAClDJ,EAASE,EAAOU,UAAUD,GAC1BV,GAAQ,CACR,OAGJ,IAAKA,EAAO,CACV,GAAIa,GAAa,GAAIC,GAAMX,EAC3BF,GAAOc,SAASF,GAChBA,EAAWZ,OAAOA,GAClBY,EAAWjB,OAASA,EACpBG,EAASc,EAEXZ,EAASF,EACTC,GAAQ,EAEV,MAAOD,GAST,QAASiB,GAAgBC,EAAMC,GAE7B,GAAIC,EAAWD,GAEb,MADAD,GAAKG,WAAaF,GACXD,CACF,IAAII,EAAQH,GAEjB,MADAD,GAAKG,UAAYF,EACVD,CAGT,KAAK,GAAItB,KAAQuB,GACf,GAAIA,EAAOI,eAAe3B,GAAO,CAE/B,GAAI4B,GAAML,EAAOvB,EAEJ,OAATA,EACFqB,EAAgBC,EAAMM,IAET,KAAT5B,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK6B,MAAM,IAEpBR,EAAgBvB,EAASwB,EAAMtB,GAAO4B,IAM5C,MAAON,GAWT,QAASQ,GAAIR,EAAMpB,EAAO6B,EAAIC,EAAI/B,GAEhC,GAAIgB,GAAQf,EAAM6B,GAEdE,IACJ,KAAK,GAAIC,KAAKjC,GACRA,EAAO0B,eAAeO,KACxBD,EAAUC,GAAKjC,EAAOiC,GAI1B,IAAI5B,GAASgB,EAAKhB,QAElB,IAAe,OAAXA,GAAmB0B,EAAK,EAC1B,QAAQ,EAAOC,EAGjB,IAAe,OAAX3B,GAAmB0B,EAAK1B,EAAOU,UAAUnB,OAAO,EAClD,QAAQ,EAAOoC,EAGjB,IAAIF,EAAK7B,EAAML,OAAO,GAAU,EAALkC,EAAQ,QAAQ,EAAOE,EAElD,IAAIxB,GAAU,GAAI0B,QAAO,IAAMb,EAAKL,MAAQ,KACxCmB,EAAUnB,EAAMoB,MAAM5B,EAE1B,IAAgB,OAAZ2B,EAAkB,QAAQ,EAAOH,EAErC,IAAMX,EAAKrB,OAAQ,CACjBmC,KAAaP,MAAMS,MAAMF,GAAU,GACnC,KAAK,GAAI1B,GAAI,EAAGA,EAAI0B,EAAQvC,SAAUa,EACpCuB,EAAUX,EAAKrB,OAAOS,IAAM0B,EAAQ1B,GAIxC,GAAIqB,IAAO7B,EAAML,OAAO,GAAwB,OAAnByB,EAAKG,UAChC,OAAQH,EAAMW,EAIhB,KAAK,GAAItC,GAAI,EAAGA,EAAI2B,EAAKN,UAAUnB,SAAUF,EAAG,CAC9C,GAAIU,GAAQyB,EAAIR,EAAKN,UAAUrB,GAAIO,EAAO6B,EAAG,EAAGpC,EAAGsC,EACnD,IAAK5B,EAAM,GACX,MAAOA,GAIT,MAAOyB,GAAIR,EAAMpB,EAAO6B,EAAIC,EAAG,EAAG/B,GAcpC,QAASsC,GAAgBxC,EAAMC,GAE7B,GAAIK,GAAQyB,EAAI/B,EAAMC,EAAKG,MAAM,KAAM,EAAG,KAE1C,OAAKE,GAAM,IAIHA,EAAM,GAAGoB,UAAWpB,EAAM,KAHxB,SAvhBZ,GAAImC,GAAWC,OAAOC,UAAUF,SAC9BG,EAAUrD,OAAOsD,mBACjBC,EAAUvD,OAAOwD,mBAOfC,EAASN,OAAOC,UAAUf,eAO5BD,EAAU,SAASsB,GACjB,MAA8B,mBAAvBR,EAASS,KAAKD,IAQvBxB,EAAa,SAASwB,GACpB,MAA8B,sBAAvBR,EAASS,KAAKD,IAQvBE,EAAS,WAGP,IAAK,GAFDF,MACAG,KAAatB,MAAMoB,KAAKG,UAAW,GAC9BzD,EAAI,EAAGY,EAAM4C,EAAQtD,OAAYU,EAAJZ,IAAWA,EAAG,CAClD,GAAI0D,GAAMF,EAAQxD,EAClB,KAAK,GAAI2D,KAAKD,GACRN,EAAOE,KAAKI,EAAKC,KACnBN,EAAIM,GAAKD,EAAIC,IAInB,MAAON,IAGTO,EAAW,SAASC,EAAMC,GACpBnE,OAAOoE,iBACTpE,OAAOoE,iBAAiBF,EAAMC,GAAS,GAC9BnE,OAAOqE,YAChBrE,OAAOqE,YAAY,KAAOH,EAAMC,GAEhCnE,OAAO,KAAOkE,GAAQC,GAIxBG,GAOFC,MAAO,SAASC,GACd,GAA2B,gBAAhBA,GACT,QAKF,IAFAA,EAAcA,EAAYnD,QAAQ,aAAc,IAAIA,QAAQ,UAAW,KAElEmD,EACH,QAOF,KAAK,GAJDC,GAAaD,EAAY3D,MAAM,KAE/B6D,KAEKrE,EAAI,EAAGY,EAAMwD,EAAWlE,OAAYU,EAAJZ,IAAWA,EAAG,CACrD,GAAIO,GAAQ6D,EAAWpE,GAAGgB,QAAQ,MAAO,KAAKR,MAAM,KAChD8D,EAAM/D,EAAM,GACZgE,EAAMhE,EAAM,EAEhB+D,GAAMtB,EAAQsB,GAEdC,EAAcC,SAARD,EAAoB,KAAOvB,EAAQuB,GAEpCnB,EAAOE,KAAKe,EAAOC,GAEbvC,EAAQsC,EAAMC,IACvBD,EAAMC,GAAKG,KAAKF,GAEhBF,EAAMC,IAAQD,EAAMC,GAAMC,GAJ1BF,EAAMC,GAAOC,EAQjB,MAAOF,IAITK,UAAW,SAASrB,GAClB,IAAKA,EACH,MAAO,EAET,IAAIsB,KACJ,KAAK,GAAIpC,KAAKc,GACRD,EAAOE,KAAKD,EAAKd,IACnBoC,EAAKF,KAAKlC,EAIdoC,GAAKC,MAGL,KAAK,GADDrE,MACKP,EAAI,EAAG6E,EAAOF,EAAKzE,OAAY2E,EAAJ7E,IAAYA,EAAG,CACjD,GAAIsE,GAAMK,EAAK3E,GACXuE,EAAMlB,EAAIiB,EAEd,IAAIvC,EAAQwC,GAAZ,CACEA,EAAIK,MAEJ,KAAK,GADDE,MACK1D,EAAI,EAAG2D,EAAOR,EAAIrE,OAAY6E,EAAJ3D,IAAYA,EAC7C0D,EAAOL,KAAKvB,EAAQoB,GAAO,IAAMpB,EAAQqB,EAAInD,IAE/Cb,GAAMkE,KAAKK,EAAOE,KAAK,UAGzBzE,GAAMkE,KAAKvB,EAAQoB,GAAO,IAAMpB,EAAQqB,IAE1C,MAAOhE,GAAMyE,KAAK,OAmBlBxD,EAAQ,SAASF,GACnB,GAAqB,mBAAVA,GAAuB,KAAM,IAAI2D,WAAU,sCACtDC,MAAK5D,MAAQA,EACb4D,KAAK5E,UACL4E,KAAKpD,UAAY,KACjBoD,KAAKC,OAAS,KACdD,KAAKE,MAAQ,KACbF,KAAK7D,aACL6D,KAAKG,QAAU,MAGbC,EAAQ9D,EAAMuB,SAOlBuC,GAAM7D,SAAW,SAASA,GACxB,MAAwB,mBAAbA,GACFyD,KAAK7D,WAEVI,YAAoBD,GACtB0D,KAAK7D,UAAUoD,KAAKhD,GACXM,EAAQN,KACjByD,KAAK7D,UAAY6D,KAAKzD,SAAS8D,OAAO9D,IAEjCyD,OAQTI,EAAM3E,OAAS,SAASA,GACtB,MAAsB,mBAAXA,GACFuE,KAAKG,SAEV1E,YAAkBa,KACpB0D,KAAKG,QAAU1E,GAEVuE,MAGT,IAAIM,GAA2C,mBAAnB7F,QAAO8F,QAG/B1F,GAEFD,UAAW,KAEX2F,SAAS,EAETC,KAAM,SAASC,GAOb,MANAT,MAAKO,QAAmB,YAATE,EACXT,KAAKO,SAAWD,EAClB5B,EAAS,WAAYhE,GAErBgE,EAAS,aAAchE,GAElBsF,MAGTU,IAAK,SAAUC,GAQb,MANKX,MAAKpF,YACRoF,KAAKpF,cAGPoF,KAAKpF,UAAU2E,KAAKoB,GAEbX,MAGTY,eAAgB,SAAUzF,GACxB,GAAI6E,KAAKO,QACPA,QAAQM,aAAcC,SAASC,MAAO5F,OAEtC,IAAgB,MAAZA,EAAK,GACPV,OAAOuG,SAASC,KAAO9F,MAClB,CACL,GAAI+F,GAAczG,OAAOuG,SAASC,KAC9BE,EAAMD,EAAYE,QAAQ,IAI9B,IAHY,KAARD,IACFD,EAAcA,EAAYlE,MAAM,EAAGmE,IAEjC,QAAQE,KAAKH,GACfzG,OAAOuG,SAASC,KAAOC,EAAc/F,MAChC,CACL,GAAI8F,GAAOC,EAAYpF,QAAQ,aAAc,SAASC,GACpD,MAAc,KAAPA,EAAY,IAAMZ,EAAOA,GAElCV,QAAOuG,SAASC,KAAOA,GAI7B,MAAOjB,QAYPsB,GAKFb,KAAM,UACNc,UAAU,EACVC,QAAQ,EACRC,IAAI,EACJxB,QAAQ,EACRC,OAAO,EACPwB,SAAS,GAQPC,EAASpH,QAAQoH,OAAS,SAASjF,GAErC,GADAA,EAASA,QACHsD,eAAgB2B,IAAS,MAAO,IAAIA,GAAOjF,EACjD,IAAID,GAAO,GAAIH,GAAM,GACrBG,GAAKrB,QAAS,EACd4E,KAAK4B,UAAYpF,EAAgBC,EAAMC,GACvCsD,KAAK6B,WACL7B,KAAK8B,UAAUR,IAGbS,EAAQJ,EAAO9D,SAMnBkE,GAAMD,UAAY,SAASD,GAGzB,MAFAA,GAAUA,MACV7B,KAAK6B,QAAUxD,EAAO2B,KAAK6B,QAASA,GAC7B7B,MAOT+B,EAAMvB,KAAO,SAASqB,GACpBA,EAAUA,KACV,IAAIG,GAAOhC,IA4BX,OAzBAA,MAAK8B,UAAUD,GAEf7B,KAAKpB,QAAU,SAASjE,GACtB,GACIsH,GADAC,EAASvH,GAAiBA,EAAcuH,QAAUzH,OAAOuG,SAASC,IAEtE,QAAOe,EAAKH,QAAQpB,MAClB,IAAK,UACHwB,EAAMxH,OAAOuG,SAASmB,SAAW1H,OAAOuG,SAASoB,OAAS3H,OAAOuG,SAASC,KACjD,MAArBgB,EAAII,OAAO,EAAG,KAChBJ,EAAM,IAAMA,EAEd,MACF,KAAK,WACHA,EAAMC,EAAOpG,QAAQ,OAAQ,GAC7B,MACF,SACEmG,EAAMC,EAAOpG,QAAQ,MAAO,IAEhCkG,EAAKM,SAA2B,MAAlBL,EAAIM,OAAO,GAAaN,EAAM,IAAMA,IAEpDpH,EAAS2F,KAAKR,KAAK6B,QAAQpB,MAAMC,IAAIV,KAAKpB,SAG1CoB,KAAKpB,UAEEoB,MAUT+B,EAAMS,MAAQ,SAASrH,EAAMuB,GAK3B,MAJa,KAATvB,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK6B,MAAM,IAEpBR,EAAgBvB,EAAS+E,KAAK4B,UAAWzG,GAAOuB,GACzCsD,MAUT+B,EAAMN,GAAKM,EAAMU,MAAQ,SAAStH,EAAMuH,GACzB,KAATvH,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK6B,MAAM,GAEpB,IAAI2F,GAAI1H,EAAS+E,KAAK4B,UAAWzG,EAOjC,OANAwH,GAAE/F,UAAY+F,EAAE/F,cACZC,EAAQ6F,GACVC,EAAE/F,UAAY+F,EAAE/F,UAAUyD,OAAOqC,GACxB/F,EAAW+F,IACpBC,EAAE/F,UAAU2C,KAAKmD,GAEZ1C,MAkLT+B,EAAMO,SAAW,SAASnH,GAExB,GAAIyG,GAAY5B,KAAK4B,UAEjBgB,EAAMzH,EAEN0H,EAAa1H,EAAKiG,QAAQ,KAC1B0B,EAAY3H,EAAKiG,QAAQ,IAC7B0B,GAA0B,KAAdA,EAAmB3H,EAAKH,OAAS8H,CAC7C,IAAI7D,GAA6B,KAAf4D,EAAoB,GAAK1H,EAAK6B,MAAM6F,EAAW,EAAGC,EACpE3H,GAAsB,KAAf0H,EAAoB1H,EAAOA,EAAK6B,MAAM,EAAG6F,EAChD,IAAIE,IAAOH,IAAKA,EAAKzH,KAAMA,EAAMgE,MAAOJ,EAAYC,MAAMC,GAE7C,OAAT9D,IACFA,EAAO,GAET,IAAI6H,GAAStF,EAAgBkE,EAAWzG,GACpCyB,EAAYoG,EAAO,EAEvB,IADAD,EAAI3H,OAAS4H,EAAO,GACF,OAAdpG,EAAoB,CACtB,IAAIC,EAAQD,GAKV,KAAM,IAAImD,WAAU,kCAJpB,KAAK,GAAIjF,GAAI,EAAGY,EAAMkB,EAAU5B,OAAYU,EAAJZ,IAAWA,EACjD8B,EAAU9B,GAAGsD,KAAK4B,KAAM+C,OAKnB/C,MAAK6B,QAAQN,UACtBvB,KAAK6B,QAAQN,SAASwB,EAGxB,OAAO/C,OAYT+B,EAAMkB,SAAW,SAAS9H,GAExB,GADAN,EAAS+F,eAAezF,GACE,YAAtB6E,KAAK6B,QAAQpB,KAAoB,CACnC,GAAIyC,GAAMzI,OAAOuG,QACjBhB,MAAKsC,SAASY,EAAIf,SAAWe,EAAId,OAASc,EAAIjC,MAEhD,MAAOjB,OAMT+B,EAAMoB,SAAWpB,EAAMkB,SAQvBlB,EAAMqB,KAAO,SAASjI,EAAMuH,KAK5BX,EAAMsB,IAAM,SAASlI,KAErB4G,EAAMuB,OAAS,WACb,GAAIJ,GAAMzI,OAAOuG,QAMjB,OAJEhB,MAAKsC,SADmB,YAAtBtC,KAAK6B,QAAQpB,KACDyC,EAAIf,SAAWe,EAAId,OAASc,EAAIjC,KAEhCiC,EAAIjC,KAAKjE,MAAM,IAExBgD"}