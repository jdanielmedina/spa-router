{"version":3,"file":"spa-router.min.js","sources":["spa-router.js"],"names":["factory","define","cmd","require","exports","module","window","onchange","onChangeEvent","listeners","Listener","i","l","length","findNode","tree","path","params","parts","split","target","found","parent","len","realCurrentValue","matcher","k","replace","$1","$2","$3","j","_children","value","extendNode","RNode","children","createRouteTree","root","routes","isFunction","callbacks","isArray","hasOwnProperty","fns","slice","dfs","ci","ri","newParams","p","RegExp","matches","match","apply","searchRouteTree","toString","Object","prototype","decodeC","decodeURIComponent","encodeC","encodeURIComponent","hasOwn","this","obj","call","extend","srcList","arguments","src","q","addEvent","name","handler","addEventListener","attachEvent","queryHelper","parse","queryString","queryParts","query","key","val","undefined","push","stringify","keys","sort","len1","_parts","len2","join","TypeError","before","after","_parent","nprtt","concat","historySupport","document","location","history","init","mode","add","fn","setHashHistory","pushState","title","hash","test","defaults","notFound","always","on","recurse","Router","routeTree","options","configure","rprtt","self","url","newURL","pathname","search","substr","dispatch","charAt","mount","route","handlers","n","uri","queryIndex","indexOf","hashIndex","req","result","setRoute","loc","redirect","once","off","remove","getRoute","hasRoute"],"mappings":"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"}