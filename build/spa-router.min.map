{"version":3,"file":"spa-router.min.js","sources":["spa-router.js"],"names":["factory","define","cmd","require","exports","module","window","onchange","onChangeEvent","listeners","Listener","i","l","length","findNode","tree","path","params","parts","split","target","found","parent","len","realCurrentValue","matcher","k","replace","$1","$2","$3","j","_children","value","extendNode","RNode","children","createRouteTree","root","routes","isFunction","callbacks","isArray","hasOwnProperty","fns","slice","dfs","ci","ri","newParams","p","RegExp","matches","match","apply","searchRouteTree","toString","Object","prototype","decodeC","decodeURIComponent","encodeC","encodeURIComponent","hasOwn","this","obj","call","extend","srcList","arguments","src","q","addEvent","name","handler","addEventListener","attachEvent","queryHelper","parse","queryString","queryParts","query","key","val","undefined","push","stringify","keys","sort","len1","_parts","len2","join","TypeError","before","after","_parent","nprtt","concat","historySupport","history","init","mode","add","fn","setHashHistory","pushState","document","title","location","hash","currentHash","idf","indexOf","test","defaults","notFound","always","on","recurse","Router","routeTree","options","configure","rprtt","self","url","newURL","pathname","search","substr","dispatch","charAt","mount","route","handlers","n","uri","queryIndex","hashIndex","req","result","setRoute","loc","redirect","once","off"],"mappings":"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"}