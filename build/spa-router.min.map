{"version":3,"file":"spa-router.min.js","sources":["spa-router.js"],"names":["factory","define","cmd","require","exports","module","window","onchange","onChangeEvent","listeners","Listener","i","l","length","findNode","tree","path","onlyFind","params","parts","split","target","found","parent","len","realCurrentValue","matcher","k","replace","$1","$2","$3","j","_children","value","extendNode","RNode","children","createRouteTree","root","routes","isFunction","callbacks","isArray","hasOwn","call","fns","slice","dfs","ci","ri","newParams","p","RegExp","matches","match","apply","searchRouteTree","toString","Object","prototype","decodeC","decodeURIComponent","encodeC","encodeURIComponent","hasOwnProperty","obj","extend","srcList","arguments","src","q","addEvent","name","handler","addEventListener","attachEvent","queryHelper","parse","queryString","queryParts","query","key","val","undefined","push","stringify","keys","sort","len1","_parts","len2","join","TypeError","this","before","after","_parent","nprtt","concat","historySupport","history","init","mode","add","fn","setHashHistory","pushState","document","title","location","hash","currentHash","idf","indexOf","test","defaults","notFound","always","on","recurse","Router","routeTree","options","configure","rprtt","self","url","newURL","pathname","search","substr","dispatch","charAt","mount","route","handlers","n","uri","queryIndex","hashIndex","req","result","setRoute","loc","redirect","once","off","splice","reload"],"mappings":";CAKC,SAASA,GACc,kBAAXC,SAAyBA,OAAOC,IACzCD,OAAO,SAASE,QAASC,QAASC,QAChCL,EAAQI,WAGVJ,EAAQM,SAEV,SAASF,SA8PX,QAASG,GAASC,GAEhB,IAAK,GADDC,GAAYC,EAASD,UAChBE,EAAI,EAAGC,EAAIH,EAAUI,OAAYD,EAAJD,EAAOA,IAC3CF,EAAUE,GAAGH,GA8HjB,QAASM,GAASC,EAAMC,EAAMC,GAC5BA,IAAaA,CAKb,KAAK,GADDC,GAHAC,EAAQH,EAAKI,MAAM,KACnBC,EAAS,KAAMC,GAAQ,EACvBC,EAASR,EAEJJ,EAAI,EAAGa,EAAML,EAAMN,OAAYW,EAAJb,IAAWA,EAAG,CAChDO,GAAS,CACT,IAAIO,GAAmBN,EAAMR,GAEzBe,EAAU,0CAEVC,EAAI,CAGRF,GAAmBA,EAAiBG,QAAQF,EAAS,SAASG,EAAIC,EAAIC,GAGpE,MAFAb,GAASA,MACTA,EAAOS,KAAOG,EACI,mBAAPC,GACF,kBAEAA,GAKX,KAAK,GAAIC,GAAI,EAAGA,EAAIT,EAAOU,UAAUpB,SAAUmB,EAC7C,GAAIT,EAAOU,UAAUD,GAAGE,QAAUT,EAAkB,CAClDJ,EAASE,EAAOU,UAAUD,GAC1BV,GAAQ,CACR,OAGJ,IAAKA,EAAO,CACV,GAAIL,EAAU,OAAO,CACrB,IAAIkB,GAAa,GAAIC,GAAMX,EAC3BF,GAAOc,SAASF,GAChBA,EAAWZ,OAAOA,GAClBY,EAAWjB,OAASA,EACpBG,EAASc,EAEXZ,EAASF,EACTC,GAAQ,EAEV,MAAOD,GAST,QAASiB,GAAgBC,EAAMC,GAE7B,GAAIC,EAAWD,GAEb,MADAD,GAAKG,WAAaF,GACXD,CACF,IAAII,EAAQH,GAEjB,MADAD,GAAKG,UAAYF,EACVD,CAGT,KAAK,GAAIvB,KAAQwB,GACf,GAAII,EAAOC,KAAKL,EAAQxB,GAAO,CAE7B,GAAI8B,GAAMN,EAAOxB,EAEJ,OAATA,EACFsB,EAAgBC,EAAMO,IAET,KAAT9B,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK+B,MAAM,IAEpBT,EAAgBxB,EAASyB,EAAMvB,GAAO8B,IAM5C,MAAOP,GAWT,QAASS,GAAIT,EAAMpB,EAAO8B,EAAIC,EAAIhC,GAEhC,GAAIgB,GAAQf,EAAM8B,GAEdE,IACJ,KAAK,GAAIC,KAAKlC,GACR0B,EAAOC,KAAK3B,EAAQkC,KACtBD,EAAUC,GAAKlC,EAAOkC,GAI1B,IAAI7B,GAASgB,EAAKhB,QAElB,IAAe,OAAXA,GAAmB2B,EAAK,EAC1B,QAAQ,EAAOC,EAGjB,IAAe,OAAX5B,GAAmB2B,EAAK3B,EAAOU,UAAUpB,OAAO,EAClD,QAAQ,EAAOsC,EAGjB,IAAIF,EAAK9B,EAAMN,OAAO,GAAU,EAALoC,EAAQ,QAAQ,EAAOE,EAElD,IAAIzB,GAAU,GAAI2B,QAAO,IAAMd,EAAKL,MAAQ,KACxCoB,EAAUpB,EAAMqB,MAAM7B,EAE1B,IAAgB,OAAZ4B,EAAkB,QAAQ,EAAOH,EAErC,IAAMZ,EAAKrB,OAAQ,CACjBoC,KAAaP,MAAMS,MAAMF,GAAU,GACnC,KAAK,GAAI3B,GAAI,EAAGA,EAAI2B,EAAQzC,SAAUc,EACpCwB,EAAUZ,EAAKrB,OAAOS,IAAM2B,EAAQ3B,GAIxC,GAAIsB,IAAO9B,EAAMN,OAAO,GAAwB,OAAnB0B,EAAKG,UAChC,OAAQH,EAAMY,EAGhB,KAAK,GAAIxC,GAAI,EAAGA,EAAI4B,EAAKN,UAAUpB,SAAUF,EAAG,CAC9C,GAAIW,GAAQ0B,EAAIT,EAAKN,UAAUtB,GAAIQ,EAAO8B,EAAG,EAAGtC,EAAGwC,EACnD,IAAK7B,EAAM,GACX,MAAOA,GAGT,MAAO0B,GAAIT,EAAMpB,EAAO8B,EAAIC,EAAG,EAAGhC,GAcpC,QAASuC,GAAgB1C,EAAMC,GAE7B,GAAIM,GAAQ0B,EAAIjC,EAAMC,EAAKI,MAAM,KAAM,EAAG,KAE1C,OAAKE,GAAM,IAIHA,EAAM,GAAGoB,UAAWpB,EAAM,KAHxB,SAxhBZ,GAAIoC,GAAWC,OAAOC,UAAUF,SAC9BG,EAAUvD,OAAOwD,mBACjBC,EAAUzD,OAAO0D,mBAOfpB,EAASe,OAAOC,UAAUK,eAO5BtB,EAAU,SAASuB,GACjB,MAA8B,mBAAvBR,EAASb,KAAKqB,IAQvBzB,EAAa,SAASyB,GACpB,MAA8B,sBAAvBR,EAASb,KAAKqB,IAQvBC,EAAS,WAGP,IAAK,GAFDD,MACAE,KAAarB,MAAMF,KAAKwB,UAAW,GAC9B1D,EAAI,EAAGa,EAAM4C,EAAQvD,OAAYW,EAAJb,IAAWA,EAAG,CAClD,GAAI2D,GAAMF,EAAQzD,EAClB,KAAK,GAAI4D,KAAKD,GACR1B,EAAOC,KAAKyB,EAAKC,KACnBL,EAAIK,GAAKD,EAAIC,IAInB,MAAOL,IAGTM,EAAW,SAASC,EAAMC,GACpBpE,OAAOqE,iBACTrE,OAAOqE,iBAAiBF,EAAMC,GAAS,GAC9BpE,OAAOsE,YAChBtE,OAAOsE,YAAY,KAAOH,EAAMC,GAEhCpE,OAAO,KAAOmE,GAAQC,GAIxBG,GAOFC,MAAO,SAASC,GACd,GAA2B,gBAAhBA,GACT,QAKF,IAFAA,EAAcA,EAAYnD,QAAQ,aAAc,IAAIA,QAAQ,UAAW,KAElEmD,EACH,QAOF,KAAK,GAJDC,GAAaD,EAAY3D,MAAM,KAE/B6D,KAEKtE,EAAI,EAAGa,EAAMwD,EAAWnE,OAAYW,EAAJb,IAAWA,EAAG,CACrD,GAAIQ,GAAQ6D,EAAWrE,GAAGiB,QAAQ,MAAO,KAAKR,MAAM,KAChD8D,EAAM/D,EAAM,GACZgE,EAAMhE,EAAM,EAEhB+D,GAAMrB,EAAQqB,GAEdC,EAAcC,SAARD,EAAoB,KAAOtB,EAAQsB,GAEpCvC,EAAOC,KAAKoC,EAAOC,GAEbvC,EAAQsC,EAAMC,IACvBD,EAAMC,GAAKG,KAAKF,GAEhBF,EAAMC,IAAQD,EAAMC,GAAMC,GAJ1BF,EAAMC,GAAOC,EAQjB,MAAOF,IAITK,UAAW,SAASpB,GAClB,IAAKA,EACH,MAAO,EAET,IAAIqB,KACJ,KAAK,GAAInC,KAAKc,GACRtB,EAAOC,KAAKqB,EAAKd,IACnBmC,EAAKF,KAAKjC,EAIdmC,GAAKC,MAGL,KAAK,GADDrE,MACKR,EAAI,EAAG8E,EAAOF,EAAK1E,OAAY4E,EAAJ9E,IAAYA,EAAG,CACjD,GAAIuE,GAAMK,EAAK5E,GACXwE,EAAMjB,EAAIgB,EAEd,IAAIvC,EAAQwC,GAAZ,CACEA,EAAIK,MAEJ,KAAK,GADDE,MACK1D,EAAI,EAAG2D,EAAOR,EAAItE,OAAY8E,EAAJ3D,IAAYA,EAC7C0D,EAAOL,KAAKtB,EAAQmB,GAAO,IAAMnB,EAAQoB,EAAInD,IAE/Cb,GAAMkE,KAAKK,EAAOE,KAAK,UAGzBzE,GAAMkE,KAAKtB,EAAQmB,GAAO,IAAMnB,EAAQoB,IAE1C,MAAOhE,GAAMyE,KAAK,OAmBlBxD,EAAQ,SAASF,GACnB,GAAqB,mBAAVA,GAAuB,KAAM,IAAI2D,WAAU,sCACtDC,MAAK5D,MAAQA,EACb4D,KAAK5E,UACL4E,KAAKpD,UAAY,KACjBoD,KAAKC,OAAS,KACdD,KAAKE,MAAQ,KACbF,KAAK7D,aACL6D,KAAKG,QAAU,MAGbC,EAAQ9D,EAAMwB,SAOlBsC,GAAM7D,SAAW,SAASA,GACxB,MAAwB,mBAAbA,GACFyD,KAAK7D,WAEVI,YAAoBD,GACtB0D,KAAK7D,UAAUoD,KAAKhD,GACXM,EAAQN,KACjByD,KAAK7D,UAAY6D,KAAKzD,SAAS8D,OAAO9D,IAEjCyD,OAQTI,EAAM3E,OAAS,SAASA,GACtB,MAAsB,mBAAXA,GACFuE,KAAKG,SAEV1E,YAAkBa,KACpB0D,KAAKG,QAAU1E,GAEVuE,MAGT,IAAIM,GAA2C,mBAAnB9F,QAAO+F,QAG/B3F,GAEFD,UAAW,KAEX4F,SAAS,EAETC,KAAM,SAASC,GAOb,MANAT,MAAKO,QAAmB,YAATE,EACXT,KAAKO,SAAWD,EAClB5B,EAAS,WAAYjE,GAErBiE,EAAS,aAAcjE,GAElBuF,MAGTU,IAAK,SAAUC,GAQb,MANKX,MAAKrF,YACRqF,KAAKrF,cAGPqF,KAAKrF,UAAU4E,KAAKoB,GAEbX,MAGTY,eAAgB,SAAU1F,GACxB,GAAI8E,KAAKO,QACPA,QAAQM,aAAcC,SAASC,MAAO7F,OAEtC,IAAgB,MAAZA,EAAK,GACPV,OAAOwG,SAASC,KAAO/F,MAClB,CACL,GAAIgG,GAAc1G,OAAOwG,SAASC,KAC9BE,EAAMD,EAAYE,QAAQ,IAI9B,IAHY,KAARD,IACFD,EAAcA,EAAYjE,MAAM,EAAGkE,IAEjC,QAAQE,KAAKH,GACf1G,OAAOwG,SAASC,KAAOC,EAAchG,MAChC,CACL,GAAI+F,GAAOC,EAAYpF,QAAQ,aAAc,SAASC,GACpD,MAAc,KAAPA,EAAY,IAAMb,EAAOA,GAElCV,QAAOwG,SAASC,KAAOA,GAI7B,MAAOjB,QAYPsB,GAKFb,KAAM,UACNc,UAAU,EACVC,QAAQ,EACRC,IAAI,EACJxB,QAAQ,EACRC,OAAO,EACPwB,SAAS,GAQPC,EAASrH,QAAQqH,OAAS,SAASjF,GAErC,GADAA,EAASA,QACHsD,eAAgB2B,IAAS,MAAO,IAAIA,GAAOjF,EACjD,IAAID,GAAO,GAAIH,GAAM,GACrBG,GAAKrB,QAAS,EACd4E,KAAK4B,UAAYpF,EAAgBC,EAAMC,GACvCsD,KAAK6B,WACL7B,KAAK8B,UAAUR,IAGbS,EAAQJ,EAAO7D,SAMnBiE,GAAMD,UAAY,SAASD,GAGzB,MAFAA,GAAUA,MACV7B,KAAK6B,QAAUxD,EAAO2B,KAAK6B,QAASA,GAC7B7B,MAOT+B,EAAMvB,KAAO,SAASqB,GACpBA,EAAUA,KACV,IAAIG,GAAOhC,IA4BX,OAzBAA,MAAK8B,UAAUD,GAEf7B,KAAKpB,QAAU,SAASlE,GACtB,GACIuH,GADAC,EAASxH,GAAiBA,EAAcwH,QAAU1H,OAAOwG,SAASC,IAEtE,QAAOe,EAAKH,QAAQpB,MAClB,IAAK,UACHwB,EAAMzH,OAAOwG,SAASmB,SAAW3H,OAAOwG,SAASoB,OAAS5H,OAAOwG,SAASC,KACjD,MAArBgB,EAAII,OAAO,EAAG,KAChBJ,EAAM,IAAMA,EAEd,MACF,KAAK,WACHA,EAAMC,EAAOpG,QAAQ,OAAQ,GAC7B,MACF,SACEmG,EAAMC,EAAOpG,QAAQ,MAAO,IAEhCkG,EAAKM,SAA2B,MAAlBL,EAAIM,OAAO,GAAaN,EAAM,IAAMA,IAEpDrH,EAAS4F,KAAKR,KAAK6B,QAAQpB,MAAMC,IAAIV,KAAKpB,SAG1CoB,KAAKpB,UAEEoB,MAUT+B,EAAMS,MAAQ,SAAStH,EAAMwB,GAK3B,MAJa,KAATxB,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK+B,MAAM,IAEpBT,EAAgBxB,EAASgF,KAAK4B,UAAW1G,GAAOwB,GACzCsD,MAUT+B,EAAMN,GAAKM,EAAMU,MAAQ,SAASvH,EAAMwH,GACzB,KAATxH,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK+B,MAAM,GAEpB,IAAI0F,GAAI3H,EAASgF,KAAK4B,UAAW1G,EAOjC,OANAyH,GAAE/F,UAAY+F,EAAE/F,cACZC,EAAQ6F,GACVC,EAAE/F,UAAY+F,EAAE/F,UAAUyD,OAAOqC,GACxB/F,EAAW+F,IACpBC,EAAE/F,UAAU2C,KAAKmD,GAEZ1C,MAmLT+B,EAAMO,SAAW,SAASpH,GAExB,GAAI0G,GAAY5B,KAAK4B,UAEjBgB,EAAM1H,EAEN2H,EAAa3H,EAAKkG,QAAQ,KAC1B0B,EAAY5H,EAAKkG,QAAQ,IAC7B0B,GAA0B,KAAdA,EAAmB5H,EAAKH,OAAS+H,CAC7C,IAAI7D,GAA6B,KAAf4D,EAAoB,GAAK3H,EAAK+B,MAAM4F,EAAW,EAAGC,EACpE5H,GAAsB,KAAf2H,EAAoB3H,EAAOA,EAAK+B,MAAM,EAAG4F,EAChD,IAAIE,IAAOH,IAAKA,EAAK1H,KAAMA,EAAMiE,MAAOJ,EAAYC,MAAMC,GAE7C,OAAT/D,IACFA,EAAO,GAET,IAAI8H,GAASrF,EAAgBiE,EAAW1G,GACpC0B,EAAYoG,EAAO,EAEvB,IADAD,EAAI3H,OAAS4H,EAAO,GACF,OAAdpG,EAAoB,CACtB,IAAIC,EAAQD,GAKV,KAAM,IAAImD,WAAU,kCAJpB,KAAK,GAAIlF,GAAI,EAAGa,EAAMkB,EAAU7B,OAAYW,EAAJb,IAAWA,EACjD+B,EAAU/B,GAAGkC,KAAKiD,KAAM+C,OAKnB/C,MAAK6B,QAAQN,UACtBvB,KAAK6B,QAAQN,SAASwB,EAGxB,OAAO/C,OAYT+B,EAAMkB,SAAW,SAAS/H,GAExB,GADAN,EAASgG,eAAe1F,GACE,YAAtB8E,KAAK6B,QAAQpB,KAAoB,CACnC,GAAIyC,GAAM1I,OAAOwG,QACjBhB,MAAKsC,SAASY,EAAIf,SAAWe,EAAId,OAASc,EAAIjC,MAEhD,MAAOjB,OAMT+B,EAAMoB,SAAWpB,EAAMkB,SASvBlB,EAAMqB,KAAO,SAASlI,EAAMwH,GAC1B,MAAO1C,OAOT+B,EAAMsB,IAAM,SAASnI,GACN,KAATA,GAA2B,MAAZA,EAAK,KACtBA,EAAOA,EAAK+B,MAAM,GAEpB,IAAI0F,GAAI3H,EAASgF,KAAK4B,UAAW1G,EAIjC,OAHU,QAANyH,GAA8B,OAAhBA,EAAE/F,WAClB+F,EAAE/F,UAAU0G,OAAO,EAAGX,EAAE/F,UAAU7B,QAE7BiF,MAOT+B,EAAMwB,OAAS,WACb,GAAIL,GAAM1I,OAAOwG,QAMjB,OAJEhB,MAAKsC,SADmB,YAAtBtC,KAAK6B,QAAQpB,KACDyC,EAAIf,SAAWe,EAAId,OAASc,EAAIjC,KAEhCiC,EAAIjC,KAAKhE,MAAM,IAExB+C"}