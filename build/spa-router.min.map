{"version":3,"file":"spa-router.min.js","sources":["spa-router.js"],"names":["factory","define","cmd","require","exports","module","window","onchange","onChangeEvent","listeners","Listener","i","l","length","findNode","tree","path","params","parts","split","target","found","parent","len","realCurrentValue","matcher","RegExp","replace","matches","match","k","slice","j","_children","value","extendNode","RNode","children","createRouteTree","routes","isFunction","callbacks","isArray","hasOwnProperty","fns","currentNode","dfs","root","ci","ri","newParams","p","apply","searchRouteTree","toString","Object","prototype","obj","call","TypeError","this","before","after","_parent","nprtt","push","utils","concat","dloc","document","location","add","fn","destroy","Router","splice","setHash","s","hash","onhashchange","routeTree","options","configure","rprtt","init","self","handler","newURL","url","dispatch","charAt","mount","on","route","node","once","handlers","off","notFound","map","redirect","parseQueryString","queryString","queryArr","param","objectLike","_param","key","join","index","currentValue","test","newCurrentValue","len2","uri","queryIndex","indexOf","query","req","result"],"mappings":"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"}